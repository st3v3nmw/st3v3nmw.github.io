<!doctype html><html lang=en-us><head><title>Bitmasks in Go | Stephen Mwangi</title>
<meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=description content="How to use bitwise operations to manipulate flags in Go"><meta property="og:site_name" content="Stephen Mwangi"><meta property="og:title" content="Bitmasks in Go"><link rel=canonical href=https://www.stephenmwangi.com/til/bitmasks-in-go/><link rel=icon type=image/x-icon href=/favicon/favicon.ico><script src=https://cdnjs.cloudflare.com/ajax/libs/js-polyfills/0.1.43/polyfill.min.js></script><script id=MathJax-script async src=https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js></script><script defer>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}}</script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/pure/3.0.0/pure-min.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css><link rel=stylesheet href=/css/hugo-tufte.min.css><script src=/js/theme.js></script><link rel=stylesheet href=/css/hugo-tufte-override.css></head><body><div id=layout class=pure-g><article class=pure-u-1 data-pagefind-body><header class=brand><a href=https://www.stephenmwangi.com/><h1>Stephen Mwangi</h1></a><h2></h2><nav class=menu><ul><li><a href=/><i class='fas fa-house fa-lg'></i> Home</a></li><li><a href=/blog><i class='fas fa-feather fa-lg'></i> Blog</a></li><li><a href=/talks><i class='fas fa-microphone-lines fa-lg'></i> Talks</a></li><li><a href=/projects><i class='fas fa-rocket fa-lg'></i> Projects</a></li><li><a href=/til><i class='fas fa-lightbulb fa-lg'></i> TIL</a></li></ul></nav><hr></header><section><h1 class=content-title data-pagefind-meta=title><a href=/til/bitmasks-in-go/>Bitmasks in Go</a></h1><span class=content-meta><i class="fa fa-feather"></i>
&nbsp;Feb 3, 2025
&nbsp;<i class="fa fa-hourglass-half"></i>
&nbsp;2 min. read<br><br><i class='fa fa-tags fa-lg'></i>&nbsp;&#183;
<a href=/topics/bitmasks/ title=bitmasks>bitmasks</a> &#183;
<a href=/topics/flags/ title=flags>flags</a> &#183;
<a href=/topics/golang/ title=golang>golang</a> &#183;</span></section><section><p>This code demonstrates how to use bitwise operations to manipulate flags in Go.</p><h2 id=defining-flags>Defining Flags</h2><p>You can define flags this way:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Flags</span> <span class=kt>uint8</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>Read</span>    <span class=nx>Flags</span> <span class=p>=</span> <span class=mi>1</span> <span class=o>&lt;&lt;</span> <span class=kc>iota</span> <span class=c1>// 1</span>
</span></span><span class=line><span class=cl>	<span class=nx>Write</span>                     <span class=c1>// 2</span>
</span></span><span class=line><span class=cl>	<span class=nx>Execute</span>                   <span class=c1>// 4</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>All</span> <span class=nx>Flags</span> <span class=p>=</span> <span class=nx>Read</span> <span class=p>|</span> <span class=nx>Write</span> <span class=p>|</span> <span class=nx>Execute</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><ul><li>An 8-bit unsigned integer (<code>uint8</code>) is used to represent flags</li><li><code>iota</code> is used to automatically increment values</li><li>Flags are defined using left shift, creating powers of 2:<ul><li><code>Read</code> = 00000001 $(2^0 = 1)$</li><li><code>Write</code> = 00000010 $(2^1 = 2)$</li><li><code>Execute</code> = 00000100 $(2^2 = 4)$</li></ul></li></ul><h2 id=bitwise-operations>Bitwise Operations</h2><ol><li><strong>Set Operation</strong>: Combine flags</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Set</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=nx>Flags</span><span class=p>)</span> <span class=nx>Flags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>a</span> <span class=p>|</span> <span class=nx>b</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=2><li><strong>Clear Operation</strong>: Remove specific flags</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Clear</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=nx>Flags</span><span class=p>)</span> <span class=nx>Flags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>a</span> <span class=o>&amp;^</span> <span class=nx>b</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=3><li><strong>Toggle Operation</strong>: Flip specific flags</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Toggle</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=nx>Flags</span><span class=p>)</span> <span class=nx>Flags</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>a</span> <span class=p>^</span> <span class=nx>b</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=4><li><strong>Check Operation</strong>: Verify if any flag is set</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Has</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=nx>Flags</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>a</span><span class=o>&amp;</span><span class=nx>b</span> <span class=o>!=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><ol start=5><li><strong>Check All Operation</strong>: Verify if all flags are set</li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>HasAll</span><span class=p>(</span><span class=nx>a</span><span class=p>,</span> <span class=nx>b</span> <span class=nx>Flags</span><span class=p>)</span> <span class=kt>bool</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>a</span><span class=o>&amp;</span><span class=nx>b</span> <span class=o>==</span> <span class=nx>b</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=usage>Usage</h2><p>Sample usage:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>perms</span> <span class=o>:=</span> <span class=nx>Read</span> <span class=p>|</span> <span class=nx>Write</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;has read:&#34;</span><span class=p>,</span> <span class=nf>Has</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Read</span><span class=p>))</span>       <span class=c1>// true</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;has execute:&#34;</span><span class=p>,</span> <span class=nf>Has</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Execute</span><span class=p>))</span> <span class=c1>// false</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;has any flag:&#34;</span><span class=p>,</span> <span class=nf>Has</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>All</span><span class=p>))</span>    <span class=c1>// true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>perms</span> <span class=p>=</span> <span class=nf>Set</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Execute</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>perms</span> <span class=p>=</span> <span class=nf>Clear</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Write</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;has read and write:&#34;</span><span class=p>,</span> <span class=nf>HasAll</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Read</span><span class=p>|</span><span class=nx>Write</span><span class=p>))</span>     <span class=c1>// false</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;has read and execute:&#34;</span><span class=p>,</span> <span class=nf>HasAll</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Execute</span><span class=p>|</span><span class=nx>Read</span><span class=p>))</span> <span class=c1>// true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>perms</span> <span class=p>=</span> <span class=nf>Toggle</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Execute</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;has execute:&#34;</span><span class=p>,</span> <span class=nf>Has</span><span class=p>(</span><span class=nx>perms</span><span class=p>,</span> <span class=nx>Execute</span><span class=p>))</span> <span class=c1>// false</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div></section><section><footer class=page-footer><hr><br><ul class=page-footer-menu><li><a href=https://github.com/st3v3nmw><i class='fab fa-github fa-lg'></i></a></li><li><a href=https://bsky.app/profile/stephenmwangi.com><i class='fab fa-bluesky fa-lg'></i></a></li><li><a href=https://www.linkedin.com/in/stephen-k-mwangi/><i class='fab fa-linkedin fa-lg'></i></a></li><li><a href=mailto:mail@stephenmwangi.com><i class='fas fa-at fa-lg'></i></a></li><li><a href=/index.xml><i class='fas fa-rss fa-lg'></i></a></li></ul><div class=copyright><p>&copy; 2025
Stephen Mwangi.
CC BY 4.0.</p></div></footer></section></article></div></body></html>